<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://trustgrid.github.io/docs/tutorials/examples/><link rel=alternate type=application/rss+xml href=https://trustgrid.github.io/docs/tutorials/examples/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/docs/favicons/favicon.ico><link rel=apple-touch-icon href=/docs/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/docs/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/docs/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/docs/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/docs/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/docs/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/docs/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/docs/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/docs/favicons/android-192x192.png sizes=192x192><title>Examples |</title><meta name=description content="Example configurations and explanations"><meta property="og:title" content="Examples"><meta property="og:description" content="Example configurations and explanations"><meta property="og:type" content="website"><meta property="og:url" content="https://trustgrid.github.io/docs/tutorials/examples/"><meta itemprop=name content="Examples"><meta itemprop=description content="Example configurations and explanations"><meta name=twitter:card content="summary"><meta name=twitter:title content="Examples"><meta name=twitter:description content="Example configurations and explanations"><link rel=preload href=/docs/scss/main.min.cd8ef62840094746f6b6a72f022aa002a82f35bfec4c2eff8212bf451c91cd1b.css as=style><link href=/docs/scss/main.min.cd8ef62840094746f6b6a72f022aa002a82f35bfec4c2eff8212bf451c91cd1b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/docs/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99793053-3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-99793053-3")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/docs/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469 106"><defs><style>.cls-1{fill:#6b6b6b}.cls-2{fill:#226ce0}</style></defs><title>Trustgrid-Logo-Grey</title><path class="cls-1" d="M.35 28.58H29.26V-.33H.35zM7.13 6.45H22.47V21.8H7.13z"/><path class="cls-1" d="M67.82-.33H38.9V28.58H67.82zM61 21.8H45.68V6.45H61z"/><path class="cls-1" d="M.35 67.13H29.26V38.22H.35zM7.13 45H22.47V60.35H7.13z"/><path class="cls-1" d="M106.36 38.22H77.45v12.3H67.82V41.27L85.26 23.83l-3.06-3L64.76 38.22H38.9V67.13H67.82V54.83h9.63v12.3h12.3V80.39h4.31V67.13h12.3zM61 60.35H45.68V45H61zm38.55.0H84.23V45H99.58z"/><path class="cls-1" d="M.35 105.69H29.26V76.77H.35zM7.13 83.55H22.47V98.9H7.13z"/><path class="cls-1" d="M38.9 105.69H67.82V76.77H38.9zm6.78-22.14H61V98.9H45.68z"/><path class="cls-2" d="M153.94 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22H140V38.78h13.2v5.78H140V67q0 3.59 1.31 5.13a4.8 4.8.0 003.91 1.55 13.59 13.59.0 006.67-2z"/><path class="cls-2" d="M176.74 39.56A18 18 0 01186 37.07V44.4q-6.58-.24-10.66 3.42a14.51 14.51.0 00-4.64 9.85V80.39h-7.57V37.32h7.57V46.6a15.52 15.52.0 016-7"/><path class="cls-2" d="M232.34 37.32V80.39h-7.65V71.27q-4.23 9.2-16 9.36-7.48.0-11.72-4.44t-4.24-12.25V37.32h7.66V61.9q0 5.46 3 8.51a10.87 10.87.0 008.18 3.06 12.11 12.11.0 009.57-4.28 16 16 0 003.54-10.7V37.32z"/><path class="cls-2" d="M260.47 44.24a21.21 21.21.0 00-6.15-1 10.48 10.48.0 00-5.49 1.26 4.21 4.21.0 00-2.08 3.87 4.3 4.3.0 002.32 4 34.68 34.68.0 007 2.73 54.86 54.86.0 017.33 2.6 13 13 0 014.85 3.83 10.51 10.51.0 012 6.67 10.58 10.58.0 01-4.6 9.29 19.65 19.65.0 01-11.44 3.17 28.35 28.35.0 01-9.32-1.55 21.07 21.07.0 01-7.61-4.39l2.85-5.54a20.07 20.07.0 006.63 3.91 22 22 0 007.69 1.47 11.45 11.45.0 006-1.39 4.61 4.61.0 002.28-4.23 4.82 4.82.0 00-2.4-4.4 32.85 32.85.0 00-7.29-2.93 48.4 48.4.0 01-7-2.48 12.43 12.43.0 01-4.64-3.71A10 10 0 01239.5 49q0-6 4.4-9a19.07 19.07.0 0111-3 27.13 27.13.0 017.69 1.1 23 23 0 016.56 3l-2.77 5.78a26 26 0 00-5.9-2.6"/><path class="cls-2" d="M303.42 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22h7.65V38.78h13.19v5.78H289.49V67c0 2.39.44 4.1 1.3 5.13a4.81 4.81.0 003.91 1.55 13.62 13.62.0 006.68-2z"/><path class="cls-1" d="M352.92 36.34V76.48a19.18 19.18.0 01-3 10.71 19.61 19.61.0 01-8.43 7.08A29.79 29.79.0 01329 96.75a36.74 36.74.0 01-10.66-1.54 34 34 0 01-9-4.16l5.05-10a25.68 25.68.0 006.51 3.17 22.5 22.5.0 007.08 1.14 12.11 12.11.0 007.74-2.27 7.52 7.52.0 002.85-6.2V72.16Q334.12 77.95 326 78a17.69 17.69.0 01-16.41-10.14 24.71 24.71.0 01-2.4-11.12 24.42 24.42.0 012.32-10.91A17.35 17.35.0 01316 38.46a17.92 17.92.0 019.61-2.61A17.42 17.42.0 01333 37.36a14.36 14.36.0 015.5 4.35V36.34zM336.07 64.51a11 11 0 002.44-7.41 11.16 11.16.0 00-2.44-7.49 8.69 8.69.0 00-12.91.0 11 11 0 00-2.48 7.45 10.85 10.85.0 002.48 7.41 8.18 8.18.0 006.47 2.85 8.08 8.08.0 006.44-2.85"/><path class="cls-1" d="M383.9 37.8a16.63 16.63.0 018.26-2V49c-.49.0-1.22-.08-2.2-.08a13.4 13.4.0 00-8.3 2.4A9.18 9.18.0 00378 57.92V80.39H363.5v-44H378v7.33a16 16 0 015.9-5.87"/><path class="cls-1" d="M411.09 18.22a7.55 7.55.0 012.16 5.58 7.59 7.59.0 01-2.16 5.54 8 8 0 01-11 0 7.59 7.59.0 01-2.16-5.54 7.55 7.55.0 012.16-5.58 8.1 8.1.0 0111 0M398.51 36.34h14.41V80.39H398.51z"/><path class="cls-1" d="M468.45 20V80.39H454v-5.7a14.92 14.92.0 01-5.58 4.68A16.94 16.94.0 01440.93 81a20.15 20.15.0 01-10.75-2.85 19.16 19.16.0 01-7.2-8 26.51 26.51.0 01-2.57-11.93 25.77 25.77.0 012.53-11.72A18.6 18.6.0 01430 38.62a20.05 20.05.0 0110.59-2.77 17.24 17.24.0 017.61 1.63A16.19 16.19.0 01454 42.12V20zm-17.1 46.5A11.77 11.77.0 00454 58.57a11.76 11.76.0 00-2.61-8 8.58 8.58.0 00-6.84-3 8.67 8.67.0 00-6.88 3.05A11.69 11.69.0 00435 58.57a11.68 11.68.0 002.64 7.93 8.68 8.68.0 006.88 3.06 8.53 8.53.0 006.84-3.06"/><path class="cls-2" d="M99.58 21.8H84.23V6.46H99.58zM106.36-.33H77.45V28.59h28.91z"/><path class="cls-2" d="M99.58 98.9H84.23V83.55H99.58zm6.78-22.13H77.45v28.92h28.91z"/></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/getting-started/><span>Getting Started</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/docs/><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/tutorials/><span class=active>Guides</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/help-center/><span>Help Center</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/release-notes/><span>Release Notes</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/docs/offline-search-index.1e9d5fba53e59b202a78772b831d6904.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/tutorials/examples/>Return to the regular view of this page</a>.</p></div><h1 class=title>Examples</h1><div class=lead>Example configurations and explanations</div><ul><li>1: <a href=#pg-efbd5e0be6ffcae038528449d737790a>Edge Deployment Scenarios</a></li><li>2: <a href=#pg-173cd3c4afef74248231cb22f21e1c4d>Layer 3 - HA Edge to AWS</a></li><li>3: <a href=#pg-b06d2dfbb4205aff0287f7e9cda94a35>Layer 3 - HA Edge to DC</a></li><li>4: <a href=#pg-406fc790d4391e1f8dfafdbecd9b5146>Layer 3 - HA Edge to Hybrid Cloud</a></li><li>5: <a href=#pg-aa5033c6cf39694df2b0d5c012e5126b>Layer 3 and Layer 4 - HA Edge to DC</a></li><li>6: <a href=#pg-7916d11cae9981a0f203717b7a2912ba>Layer 3 and Layer 4 - HA Edge to DC - L4 from DC</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-efbd5e0be6ffcae038528449d737790a>1 - Edge Deployment Scenarios</h1><p>When deciding on an Edge deployment architecture, there are several key variables to consider:</p><ul><li><p>Behind the Firewall or Beside the Firewall</p></li><li><p>HA or Single <a href=https://trustgrid.github.io/docs/docs/nodes/>Node</a></p></li><li><p>Multi-interface or Single-interface</p></li><li><p>Layer 3 or Layer 4 Edge <a href=https://trustgrid.github.io/docs/getting-started/networking/>networking</a></p></li></ul><p>Trustgrid supports unique configurations per site to minimize the changes required at the Edge network. The easiest scenario to deploy is a Layer 4, behind the firewall, single <a href=https://trustgrid.github.io/docs/docs/nodes/>node</a> deployment. This is the standard recommendation. When deployed behind a firewall, the firewall must allow egress traffic to Trustgrid&rsquo;s Cloud environment (see Network Requirements) and the <a href=https://trustgrid.github.io/docs/getting-started/networking/>network(s)</a> where the gateway nodes are installed.</p><h3 id=beside-a-firewall>Beside a Firewall</h3><p>In some scenarios, you may want to deploy your Trustgrid <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> beside the firewall. In this configuration, the management interface of each <a href=https://trustgrid.github.io/docs/docs/nodes/>node</a> will be connected directly to the internet and the data interface will get connected to a LAN such as the inside/LAN network.</p><h5 id=edge-network-topology>Edge Network Topology:</h5><p><img src=edge-topology.png alt=img></p><h3 id=considerations-in-this-configuration>Considerations in this Configuration:</h3><ul><li>A unique, static, public IP address is required for each <a href=https://trustgrid.github.io/docs/docs/nodes/>node</a>.</li><li>Typical deployments beside a firewall involve a switch connected to the ISP’s ethernet handoff, the firewall, and the <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a>.</li><li><a href=https://trustgrid.github.io/docs/docs/clusters/>Clustered nodes</a> in this configuration may require using the data interface for <a href=https://trustgrid.github.io/docs/docs/clusters/>cluster</a> communication.</li><li>It is possible to configure L4 proxy connectors that are bound to the management interface. Care should be taken to ensure that L4 proxy connectors aren’t inadvertently configured to allow access to a service from the public internet. If using L4 proxy connectors on the management interface, the source CIDR should be used to limit access to the service as desired.</li></ul><h4 id=requirements-to-configure>Requirements to Configure:</h4><ul><li>Standard<ul><li>1 Public IP Address</li><li>1 Private IP Address</li><li>2 DNS Servers</li></ul></li><li>HA<ul><li>2 Public IP Addresses</li><li>2 Private IP Addresses</li><li>1 Private IP Address for Cluster IP</li><li>2 DNS Servers</li></ul></li></ul><h3 id=behind-a-firewall>Behind a Firewall</h3><p>The most typical configuration for edge nodes is to place the <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a> behind a firewall with the appropriate access controls in place to allow communication on the management interface. In this configuration, the management configuration can be placed in a DMZ network and the data interface would get connected to a LAN such as the inside/LAN network.</p><h5 id=edge-network-topology-1>Edge Network Topology:</h5><p><img src=edge-topology2.png alt=img></p><h4 id=considerations-in-this-configuration-1>Considerations in this Configuration:</h4><ul><li>Multiple <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a> can NAT to a single public IP address.</li><li>Firewalls in front of gateway nodes must be configured to allow access to the IP:Port of the gateway <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a> from the public IP address(es) that the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> NAT to.</li><li>The firewall must be configured to allow outbound traffic from the management interface of the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> based on Trustgrid&rsquo;s network requirements.</li></ul><h4 id=requirements-to-configure-1>Requirements to Configure:</h4><ul><li>Standard<ul><li>1 Public IP Address</li><li>1 Private IP Address</li><li>2 DNS Servers</li></ul></li><li>HA<ul><li>2 Public IP Addresses</li><li>2 Private IP Addresses</li><li>1 Private IP Address for Cluster IP</li><li>2 DNS Servers</li></ul></li></ul><h3 id=firewalled-nodes>Firewalled Nodes</h3><p>Some organizations may choose to put the management interface behind a firewall and also put a firewall between the data interface and the local <a href=https://trustgrid.github.io/docs/getting-started/networking/>network</a>.</p><h5 id=edge-network-topology-2>Edge Network Topology:</h5><p><img src=edge-topology3.png alt=img></p><h4 id=considerations-in-this-configuration-2>Considerations in this Configuration:</h4><ul><li>Multiple <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a> can NAT to a single public IP address.</li><li>Firewalls in front of gateway <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a> must be configured to allow access to the IP:Port of the gateway nodes from the public IP address(es) that the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> NAT to.</li><li>The firewall between the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> and the internet must be configured to allow outbound traffic from the management interface of the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> based on Trustgrid&rsquo;s network requirements.</li><li>The firewall between the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> and the LAN must allow connectivity from all IP addresses associated with the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> data interface to resources on the necessary services on the LAN. This includes any IP addresses used in outside NAT configurations as well as the cluster IP.</li></ul><h4 id=requirements-to-configure-2>Requirements to Configure:</h4><ul><li>Standard<ul><li>1 Public IP Address</li><li>1 Private IP Address</li><li>2 DNS Servers</li></ul></li><li>HA<ul><li>2 Public IP Addresses</li><li>2 Private IP Addresses</li><li>1 Private IP Address for Cluster IP</li><li>2 DNS Servers</li></ul></li></ul><h3 id=on-a-stick---single-node-interface>On-a-stick - Single Node Interface</h3><p>Our best practice recommendation is to separate the management and data traffic when possible, but in some cases the use of both network interfaces on edge nodes isn’t desirable. The most common scenario for this configuration is when the edge network is a small, basic, network where utilizing both interfaces on the <a href=https://trustgrid.github.io/docs/docs/nodes/>node(s)</a> would mean connecting both interfaces to the same network. In this scenario, an on-a-stick configuration can be used.</p><h5 id=edge-network-topology-3>Edge Network Topology:</h5><p><img src=edge-topology4.png alt=img></p><h4 id=considerations-in-this-configuration-3>Considerations in this Configuration:</h4><ul><li>Only the management interface of the <a href=https://trustgrid.github.io/docs/docs/nodes/>node</a> is used, requiring a minimum of three IP addresses to support both management/data traffic.</li><li>The management interface must be connected to a network that allows outbound access to the internet based on our network documentation, as well as access to a LAN/inside network.</li><li>Clustered <a href=https://trustgrid.github.io/docs/docs/nodes/>nodes</a> should be configured with the <a href=https://trustgrid.github.io/docs/docs/clusters/>cluster</a> communication IP set to the IP of the management interface.</li></ul><h4 id=requirements-to-configure-3>Requirements to Configure:</h4><ul><li>Standard<ul><li>1 Private IP Address</li><li>2 DNS Servers</li></ul></li><li>HA<ul><li>2 Private IP Addresses</li><li>1 Private IP Address for Cluster IP</li><li>2 DNS Servers</li></ul></li></ul><h3 id=hosted-fi-core---access-to-remote-network-via-edge>Hosted FI Core - Access to Remote Network via Edge</h3><p>A common deployment scenario involves the need to access a network that is routable from the edge location, but outside of the <a href=https://trustgrid.github.io/docs/getting-started/networking/>network</a> that the Trustgrid edge node is configured on. An example of this is a financial institution with a hosted core that may be available from the financial institution over a connection such as a VPN or MPLS.</p><h5 id=edge-network-topology-4>Edge Network Topology:</h5><p><img src=edge-topology5.png alt=img></p><h4 id=considerations-in-this-configuration-4>Considerations in this Configuration:</h4><ul><li>Inside NAT(s) for the remote address should be added on the data interface to map the hosted core IP address(es) to virtual IPs on the <a href=https://trustgrid.github.io/docs/docs/domain/virtual-networks/>Trustgrid virtual network</a>.</li><li>In this scenario setting a <a href=https://trustgrid.github.io/docs/docs/domain/virtual-networks/routes/>route</a> on the data interface from the Trustgrid portal may be necessary.</li><li>In most cases the hosted core provider will need to allow access to the hosted core from any IP addresses associated with a <a href=https://trustgrid.github.io/docs/docs/nodes/>node&rsquo;s</a> data interface. This includes any IP addresses used in outside NAT configurations as well as the cluster IP.</li></ul><h3 id=outside-nat---avoiding-routing-at-the-edge>Outside NAT - Avoiding Routing at the Edge</h3><p>In some scenarios, it may not be desirable to have to add <a href=https://trustgrid.github.io/docs/docs/domain/virtual-networks/routes/>routes</a> on the edge network in order to <a href=https://trustgrid.github.io/docs/docs/domain/virtual-networks/routes/>route</a> traffic through the Trustgrid network. We recommend using L4 proxy in these scenarios when possible, however outside NAT can be utilized to allow traffic to and from the edge network without adding <a href=https://trustgrid.github.io/docs/docs/domain/virtual-networks/routes/>routes</a> on the edge network.</p><h5 id=edge-network-topology-5>Edge Network Topology:</h5><p><img src=edge-topology6.png alt=img></p><h4 id=considerations-in-this-configuration-5>Considerations in this Configuration:</h4><ul><li>In this configuration you can configure PAT, which allows you to source all traffic from the <a href=https://trustgrid.github.io/docs/docs/nodes/>node</a> on a single IP address that exists on the local network.</li><li>The IP address that you select must be a free IP address on the network that is also excluded from any DHCP scope on the subnet that it&rsquo;s in.</li><li>In some cases it may be desirable to use multiple outside NATs in order to identify traffic from a gateway-side host using a unique source IP at the edge. Using more than a handful of outside NATs is not recommended as it may present a problem with connectivity during a HA failover situation.</li></ul><h3 id=l3-to-l4-proxying---function-with-1-ip>L3 to L4 Proxying - Function with 1 IP</h3><p>In deployments where only a few services need to be accessed via an edge node, it may make sense to deploy the edge node in a mode in which the edge node intercepts layer 3 TCP traffic and proxies the traffic to a TCP service defined in the L4 Proxy configuration. The advantage of configuring the edge node in this fashion is that the traffic effectively does a source pat out of the <a href=https://trustgrid.github.io/docs/docs/nodes/>node</a> interface IP address, thus simplifying the network configuration at the edge node location. The edge node appears to the server as a single client machine accessing the server, rather than a range of different IP clients for which the network in that location must be configured to forward traffic to. One of the biggest differences between this and the previous outside nat configuration is that all traffic is coming from the single interface IP address, rather than a separate IP address.</p><h4 id=considerations-in-this-configuration-6>Considerations in this Configuration:</h4><ul><li>In this configuration all traffic for a configured service will come from a single IP address. If you need to differentiate different clients by IP address, this configuration will not suffice.</li><li>Only TCP services can be used in this configuration. UDP and ICMP will not be usable with this configuration.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-173cd3c4afef74248231cb22f21e1c4d>2 - Layer 3 - HA Edge to AWS</h1><div class=lead>Connect a highly-available edge cluster to AWS</div><p>In this scenario a clustered pair of active/passive edge nodes at each edge location connects to a pair of active/passive clustered gateway nodes in an AWS VPC and layer 3 traffic is routed between the edge location and AWS.</p><p>This configuration allows for the loss of one node at each site without a loss of connectivity between the edge location and AWS. Upon node failover, the active cluster member is switched to the second node and the VPC route table is updated to route traffic destined for the Trustgrid network through the ENI of the second node, allowing traffic flow to continue. Failback to the original active cluster member happens when the original active node recovers from the event that caused the failover, and the VPC route table is updated to route traffic destined fro the Trustgrid network through the ENI of the data NIC on the original active node.</p><p>Inside NATs are used to translate local IP addresses to IP addresses on the Trustgrid network.</p><p><img src=aws-topology.png alt="Network Topology"></p><h3 id=network-information>Network Information</h3><table><thead><tr><th>Local Network CIDR</th><th>Location</th></tr></thead><tbody><tr><td>192.168.10.0/24</td><td>AWS VPC Subnet</td></tr><tr><td>172.16.10.0/24</td><td>Edge location 1</td></tr><tr><td>172.16.20.0/24</td><td>Edge location 2</td></tr><tr><td>172.16.30.0/24</td><td>Edge location 3</td></tr></tbody></table><h3 id=route-configuration>Route Configuration</h3><p>In this example, the Trustgrid network is <code>10.100.0.0/16</code>.</p><table><thead><tr><th>Trustgrid Network CIDR</th><th>Destination Node</th></tr></thead><tbody><tr><td>10.100.100.0/24</td><td>AWSCluster</td></tr><tr><td>10.100.10.0/24</td><td>EdgeCluster1</td></tr><tr><td>10.100.20.0/24</td><td>EdgeCluster2</td></tr><tr><td>10.100.30.0/24</td><td>EdgeCluster3</td></tr></tbody></table><h3 id=inside-nat-configuration>Inside NAT Configuration</h3><table><thead><tr><th>Local CIDR</th><th>Network CIDR</th><th>Node</th><th>Description</th></tr></thead><tbody><tr><td>192.168.10.15/32</td><td>10.100.100.15/32</td><td>AWSCluster</td><td>Application server behind AWSCluster nodes</td></tr><tr><td>172.16.10.15/32</td><td>10.100.10.15/32</td><td>EdgeCluster1</td><td>MySQL server behind EdgeCluster1 nodes</td></tr><tr><td>172.16.20.15/32</td><td>10.100.20.15/32</td><td>EdgeCluster2</td><td>MySQL server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.20.20/32</td><td>10.100.20.20/32</td><td>EdgeCluster2</td><td>SFTP server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.30.15/32</td><td>10.100.30.15/32</td><td>EdgeCluster3</td><td>MySQL server behind EdgeCluster3 nodes</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b06d2dfbb4205aff0287f7e9cda94a35>3 - Layer 3 - HA Edge to DC</h1><div class=lead>Connect a highly-available edge cluster to a data center</div><p>In this scenario, a clustered pair of active/passive edge nodes at each edge location connects to a pair of active/passive clustered gateway nodes at the data center and layer 3 traffic is routed between the edge location and the data center.</p><p>This configuration allows for the loss of one node at each site without a loss of connectivity between the edge location and the data center. Upon node failover, the active cluster member is switched to the second node and the shared IP address follows, allowing traffic flow to continue using the second node. Failback to the original active node happens when the original active recovers from the event that caused the failover, and the shared IP is moved back to the original active at that time.</p><p>A route is added in the core router at the data center and edge locations for the Trustgrid subnet with the next hop set to the shared IP of the clustered nodes in each location. Inside NATs are used to translate local IP addresses to IP addresses on the Trustgrid network.</p><p><img src=l3-ha-dc-topology.png alt="Network Topology"></p><h3 id=network-information>Network Information</h3><table><thead><tr><th>Local Network CIDR</th><th>Location</th></tr></thead><tbody><tr><td>192.168.10.0/24</td><td>Data center</td></tr><tr><td>172.16.10.0/24</td><td>Edge location 1</td></tr><tr><td>172.16.20.0/24</td><td>Edge location 2</td></tr><tr><td>172.16.30.0/24</td><td>Edge location 3</td></tr></tbody></table><h3 id=route-configuration>Route Configuration</h3><p>In this example, the Trustgrid network is <code>10.100.0.0/16</code>.</p><table><thead><tr><th>Trustgrid Network CIDR</th><th>Destination Node</th></tr></thead><tbody><tr><td>10.100.100.0/24</td><td>DCCluster</td></tr><tr><td>10.100.10.0/24</td><td>EdgeCluster1</td></tr><tr><td>10.100.20.0/24</td><td>EdgeCluster2</td></tr><tr><td>10.100.30.0/24</td><td>EdgeCluster3</td></tr></tbody></table><h3 id=inside-nat-configuration>Inside NAT Configuration</h3><table><thead><tr><th>Local CIDR</th><th>Network CIDR</th><th>Node</th><th>Description</th></tr></thead><tbody><tr><td>192.168.10.15/32</td><td>10.100.100.15/32</td><td>DCCluster</td><td>Application server behind DCCluster nodes</td></tr><tr><td>172.16.10.15/32</td><td>10.100.10.15/32</td><td>EdgeCluster1</td><td>MySQL server behind EdgeCluster1 nodes</td></tr><tr><td>172.16.20.15/32</td><td>10.100.20.15/32</td><td>EdgeCluster2</td><td>MySQL server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.20.20/32</td><td>10.100.20.20/32</td><td>EdgeCluster2</td><td>SFTP server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.30.15/32</td><td>10.100.30.15/32</td><td>EdgeCluster3</td><td>MySQL server behind EdgeCluster3 nodes</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-406fc790d4391e1f8dfafdbecd9b5146>4 - Layer 3 - HA Edge to Hybrid Cloud</h1><div class=lead>Connect a highly-available edge cluster to AWS and a private data center</div><p>In this scenario, a clustered pair of active/passive edge nodes at each edge location connects to a pair of active/passive clustered gateway nodes in both an AWS VPC and a data center with layer 3 routed between the edge locations and the hybrid cloud.</p><p>This configuration allows for the loss of one node at each site without a loss of connectivity between the edge location and the hybrid cloud. Clustered nodes at the edge locations and the data center use a shared IP. The clustered nodes in the AWS VPC maintain the correct ENI as the target for the route to the Trustgrid network in the VPC route table to allow traffic to continue to flow in the event of a failover on any of the nodes. Failback to the original active cluster member happens when the node recovers from the event that caused the failover, and on the data center or edge nodes the shared IP is switched back to the original active node.</p><p>Failback on AWS nodes triggers an update of the route table to set the target for the route to the Trustgrid network back to the ENI of the data NIC on the original active cluster member. Inside NATs are used to translate local IP addresses to IP addresses on the Trustgrid network.</p><p>A route is added in the core router at the data center and edge locations for the Trustgrid subnet with the next hop set to the shared IP of the clustered nodes in each location. Inside NATs are used to translate local IP addresses to IP addresses on the Trustgrid network.</p><p><img src=hybrid-topology.png alt="Network Topology"></p><h3 id=network-information>Network Information</h3><table><thead><tr><th>Local Network CIDR</th><th>Location</th></tr></thead><tbody><tr><td>192.168.10.0/24</td><td>AWS VPC Subnet</td></tr><tr><td>192.168.20.0/24</td><td>Data center</td></tr><tr><td>172.16.10.0/24</td><td>Edge location 1</td></tr><tr><td>172.16.20.0/24</td><td>Edge location 2</td></tr></tbody></table><h3 id=route-configuration>Route Configuration</h3><p>In this example, the Trustgrid network is <code>10.100.0.0/16</code>.</p><table><thead><tr><th>Trustgrid Network CIDR</th><th>Destination Node</th></tr></thead><tbody><tr><td>10.100.100.0/24</td><td>DCCluster</td></tr><tr><td>10.100.200.0/24</td><td>AWSCluster</td></tr><tr><td>10.100.10.0/24</td><td>EdgeCluster1</td></tr><tr><td>10.100.20.0/24</td><td>EdgeCluster2</td></tr></tbody></table><h3 id=inside-nat-configuration>Inside NAT Configuration</h3><table><thead><tr><th>Local CIDR</th><th>Network CIDR</th><th>Node</th><th>Description</th></tr></thead><tbody><tr><td>192.168.10.15/32</td><td>10.100.100.15/32</td><td>AWSCluster</td><td>Application server behind AWSCluster nodes</td></tr><tr><td>192.168.20.15/32</td><td>10.100.200.15/32</td><td>DCCluster</td><td>Application server behind DCCluster nodes</td></tr><tr><td>172.16.10.15/32</td><td>10.100.10.15/32</td><td>EdgeCluster1</td><td>MySQL server behind EdgeCluster1 nodes</td></tr><tr><td>172.16.20.15/32</td><td>10.100.20.15/32</td><td>EdgeCluster2</td><td>MySQL server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.20.20/32</td><td>10.100.20.20/32</td><td>EdgeCluster2</td><td>SFTP server behind EdgeCluster2 nodes</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-aa5033c6cf39694df2b0d5c012e5126b>5 - Layer 3 and Layer 4 - HA Edge to DC</h1><div class=lead>Connect a highly-available edge cluster to a data center with layer 4 traffic originating at the edge</div><p>In this scenario, a clustered pair of active/passive edge nodes at each edge location connects to a pair of active/passive clustered gateway nodes at the data center. Layer 3 is utilized to allow an application server at the data center to access data at the edge location and a layer 4 service and connector is used at the edge locations to provide connectivity to an FTP service back at the data center.</p><p>This configuration allows for the loss of one node at each site without a loss of connectivity between the edge location and the data center. Upon node failover, the active cluster member is switched to the second node and the shared IP address follows, allowing traffic to continue to flow using the second node. Failback to the original active node happens when the node recovers from the event that caused the failover and the shared IP is moved back to the original node at that time.</p><p>A route is added in the core router at the data center and edge locations for the Trustgrid subnet with the next hop set to the shared IP of the clustered nodes at each location. Inside NATs are used to translate local IP addresses to IP addresses on the Trustgrid network for layer 3 traffic. The L4 service on the data center node is configured so that L4 traffic to the FTP server will show up with the source IP as the shared IP for the cluster. The listening port of the L4 connector is accessible via the shared IP on the edge nodes, allowing for high-availability of the L4 connector.</p><p><img src=l4-topology.png alt="Network Topology"></p><h3 id=layer-4-configuration>Layer 4 Configuration</h3><h4 id=service>Service</h4><table><thead><tr><th>Protocol</th><th>Name</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>FTP</td><td>DCFTP</td><td>192.168.10.15:21</td><td>FTP access on DC application server</td></tr></tbody></table><h4 id=connector>Connector</h4><table><thead><tr><th>Protocol</th><th>Listen Port</th><th>Source Block</th><th>Destination Node</th><th>Remote Address</th><th>IP</th><th>Description</th></tr></thead><tbody><tr><td>FTP</td><td>8021</td><td><cidr of edge server></td><td>DCCluster</td><td>svc://DCFTP</td><td><cluster shared ip></td><td>L4 connector for FTP access from each edge node</td></tr></tbody></table><h3 id=network-information>Network Information</h3><table><thead><tr><th>Local Network CIDR</th><th>Location</th></tr></thead><tbody><tr><td>192.168.10.0/24</td><td>Data center</td></tr><tr><td>172.16.10.0/24</td><td>Edge location 1</td></tr><tr><td>172.16.20.0/24</td><td>Edge location 2</td></tr><tr><td>172.16.30.0/24</td><td>Edge location 3</td></tr></tbody></table><h3 id=route-configuration>Route Configuration</h3><p>In this example, the Trustgrid network is <code>10.100.0.0/16</code>.</p><table><thead><tr><th>Trustgrid Network CIDR</th><th>Destination Node</th></tr></thead><tbody><tr><td>10.100.100.0/24</td><td>DCCluster</td></tr><tr><td>10.100.10.0/24</td><td>EdgeCluster1</td></tr><tr><td>10.100.20.0/24</td><td>EdgeCluster2</td></tr><tr><td>10.100.30.0/24</td><td>EdgeCluster3</td></tr></tbody></table><h3 id=inside-nat-configuration>Inside NAT Configuration</h3><table><thead><tr><th>Local CIDR</th><th>Network CIDR</th><th>Node</th><th>Description</th></tr></thead><tbody><tr><td>192.168.10.15/32</td><td>10.100.100.15/32</td><td>DCCluster</td><td>Application server behind DCCluster nodes</td></tr><tr><td>172.16.10.15/32</td><td>10.100.10.15/32</td><td>EdgeCluster1</td><td>MySQL server behind EdgeCluster1 nodes</td></tr><tr><td>172.16.20.15/32</td><td>10.100.20.15/32</td><td>EdgeCluster2</td><td>MySQL server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.20.20/32</td><td>10.100.20.20/32</td><td>EdgeCluster2</td><td>SFTP server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.30.15/32</td><td>10.100.30.15/32</td><td>EdgeCluster3</td><td>MySQL server behind EdgeCluster3 nodes</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7916d11cae9981a0f203717b7a2912ba>6 - Layer 3 and Layer 4 - HA Edge to DC - L4 from DC</h1><div class=lead>Connect a highly-available edge cluster to a data center with layer 4 traffic originating at the data center</div><p>In this scenario, a clustered pair of active/passive edge nodes at each edge location connects to a pair of active/passive clustered gateway nodes at the data center. Layer 3 is utilized to allow an application server at the data center to access data at the edge location and a layer 4 service and connector is used at the data center to provide connectivitiy to an FTP service at edge location 1.</p><p>This configuration allows for the loss of one node at each site without a loss of connectivity between the edge location and the data center. Upon node failover, the active cluster member is switched to the second node and the shared IP address follows, allowing traffic to continue to flow using the second node. Failback to the original active node happens when the node recovers from the event that caused the failover and the shared IP is moved back to the original node at that time.</p><p>A route is added in the core router at the data center and edge locations for the Trustgrid subnet with the next hop set to the shared IP of the clustered nodes at each location. Inside NATs are used to translate local IP addresses to IP addresses on the Trustgrid network for layer 3 traffic. The L4 service on the data center node is configured so that L4 traffic to the FTP server will show up with the source IP as the shared IP for the cluster. The listening port of the L4 connector is accessible via the shared IP on the data center nodes, allowing for high-availability of the L4 connector.</p><p><img src=l4-dc-topology.png alt="Network Topology"></p><h3 id=layer-4-configuration>Layer 4 Configuration</h3><h4 id=service>Service</h4><table><thead><tr><th>Protocol</th><th>Name</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>FTP</td><td>Edge1FTP</td><td>172.16.10.15:21</td><td>FTP access on edge location 1 server</td></tr></tbody></table><h4 id=connector>Connector</h4><table><thead><tr><th>Protocol</th><th>Listen Port</th><th>Source Block</th><th>Destination Node</th><th>Remote Address</th><th>IP</th><th>Description</th></tr></thead><tbody><tr><td>FTP</td><td>8021</td><td>192.168.10.15/32</td><td>EdgeCluster1</td><td>svc://Edge1FTP</td><td>192.168.10.215</td><td>L4 connector for FTP access to edge location 1 server</td></tr></tbody></table><h3 id=network-information>Network Information</h3><table><thead><tr><th>Local Network CIDR</th><th>Location</th></tr></thead><tbody><tr><td>192.168.10.0/24</td><td>Data center</td></tr><tr><td>172.16.10.0/24</td><td>Edge location 1</td></tr><tr><td>172.16.20.0/24</td><td>Edge location 2</td></tr><tr><td>172.16.30.0/24</td><td>Edge location 3</td></tr></tbody></table><h3 id=route-configuration>Route Configuration</h3><p>In this example, the Trustgrid network is <code>10.100.0.0/16</code>.</p><table><thead><tr><th>Trustgrid Network CIDR</th><th>Destination Node</th></tr></thead><tbody><tr><td>10.100.100.0/24</td><td>DCCluster</td></tr><tr><td>10.100.10.0/24</td><td>EdgeCluster1</td></tr><tr><td>10.100.20.0/24</td><td>EdgeCluster2</td></tr><tr><td>10.100.30.0/24</td><td>EdgeCluster3</td></tr></tbody></table><h3 id=inside-nat-configuration>Inside NAT Configuration</h3><table><thead><tr><th>Local CIDR</th><th>Network CIDR</th><th>Node</th><th>Description</th></tr></thead><tbody><tr><td>192.168.10.15/32</td><td>10.100.100.15/32</td><td>DCCluster</td><td>Application server behind DCCluster nodes</td></tr><tr><td>172.16.10.15/32</td><td>10.100.10.15/32</td><td>EdgeCluster1</td><td>MySQL server behind EdgeCluster1 nodes</td></tr><tr><td>172.16.20.15/32</td><td>10.100.20.15/32</td><td>EdgeCluster2</td><td>MySQL server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.20.20/32</td><td>10.100.20.20/32</td><td>EdgeCluster2</td><td>SFTP server behind EdgeCluster2 nodes</td></tr><tr><td>172.16.30.15/32</td><td>10.100.30.15/32</td><td>EdgeCluster3</td><td>MySQL server behind EdgeCluster3 nodes</td></tr></tbody></table></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/trustgrid/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/trustgrid aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Trustgrid All Rights Reserved</small>
<small class=ml-1><a href=https://trustgrid.io target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=/docs/js/main.min.f1a20e761a85478d0ce3298a01e295324be8858ef8f2d2baac6737980799b320.js integrity="sha256-8aIOdhqFR40M4ymKAeKVMkvohY748tK6rGc3mAeZsyA=" crossorigin=anonymous></script>
<script src=/docs/js/prism.js></script>
<script src=/docs/js/tabpane-persist.js></script></body></html>