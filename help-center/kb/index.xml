<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– Knowledge Base</title><link>/help-center/kb/</link><description>Recent content in Knowledge Base on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/help-center/kb/index.xml" rel="self" type="application/rss+xml"/><item><title>Help-Center: Site Requirements</title><link>/help-center/kb/site-requirements/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>/help-center/kb/site-requirements/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>Trustgrid’s architecture consists of Nodes deployed at the Edge (on-premise) and management infrastructure built in AWS. Nodes create tunnels to other nodes for data transfer, and to the management infrastructure for control. All tunnels are TLS connections and must be permitted by any firewall between&lt;/p>
&lt;/div>
&lt;h3 id="network-requirements-for-all-nodes">Network Requirements for All Nodes&lt;/h3>
&lt;p>In order to connect to the Trustgrid Control Plane, the following outbound traffic must be allowed from the node’s configured primary interface IP address&lt;/p>
&lt;ul>
&lt;li>TCP Port 443 and TCP/UDP 8443 to:&lt;/li>
&lt;li>
&lt;ul>
&lt;li>35.171.100.16/28&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;ul>
&lt;li>34.223.12.192/28&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>TCP/UDP Port 53 to the configured DNS servers. These DNS servers must be able to resolve DNS requests for the trustgrid.io domain&lt;/li>
&lt;/ul>
&lt;h3 id="recommendations">Recommendations&lt;/h3>
&lt;p>At least 10Mbps download speed is recommended for reasonable performance during upgrades. Actual bandwidth requirement will be specific to the workloads running across the device.&lt;/p>
&lt;p>Hardware devices are recommended to be connected to ports configured for 1000 Mbps and full duplex with auto negotiation on.&lt;/p>
&lt;h2 id="gateway-node-network-requirements">Gateway Node Network Requirements&lt;/h2>
&lt;p>In addition to being able to connect to the Control Plane resource outlined above, Gateway Nodes must be allowed to receive inbound traffic on their configured public IP and port (typically TCP/UDP port 8443). Both the advertised public IP and port are configurable when enabling a node as a gateway.&lt;/p></description></item><item><title>Help-Center: Edge Node Behavior When DNS Resolution Fails</title><link>/help-center/kb/dns-failure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/help-center/kb/dns-failure/</guid><description>
&lt;h2 id="symptoms">Symptoms&lt;/h2>
&lt;ul>
&lt;li>Node does not connect to the Portal&lt;/li>
&lt;li>Packet captures show repeated DNS queries for gatekeeper.trustgrid.io but no response&lt;/li>
&lt;/ul>
&lt;h2 id="cause">Cause&lt;/h2>
&lt;ul>
&lt;li>DNS servers configured on edge node are not accessible&lt;/li>
&lt;li>A firewall is blocking TCP/UDP port 53 between the edge node and the configured DNS&lt;/li>
&lt;li>DNS servers configured on edge node cannot resolve public DNS entries for the trustgrid.io domain&lt;/li>
&lt;/ul>
&lt;h2 id="troubleshooting-steps">Troubleshooting Steps&lt;/h2>
&lt;ul>
&lt;li>Determine the configured DNS Servers - Connecting a monitor to the node will display the current IP configuration including the DNS Servers as shown below: &lt;img src="dns.png" alt="img">&lt;/li>
&lt;li>(If possible) Capture traffic between the edge node and the internet and confirm you see both a DNS query (usually for gatekeeper.trustgrid.io) &lt;strong>AND&lt;/strong> response &lt;img src="pcap.png" alt="img">&lt;/li>
&lt;/ul>
&lt;h2 id="resolution">Resolution&lt;/h2>
&lt;ul>
&lt;li>Ensure the edge node can make TCP/UDP connection on port 53 to the configured DNS server&lt;/li>
&lt;li>If using private DNS server ensure they have forwarders configured that can resolve trustgrid.io DNS records&lt;/li>
&lt;li>If configured DNS servers are incorrect the node will need to be manually reconfigured. Contact Trustgrid Support for assistance&lt;/li>
&lt;/ul></description></item><item><title>Help-Center: Edge Node Behavior When Port 443 is blocked</title><link>/help-center/kb/443-blocked/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/help-center/kb/443-blocked/</guid><description>
&lt;h2 id="symptoms">Symptoms&lt;/h2>
&lt;ul>
&lt;li>Node will not update either automatically or when manually triggered&lt;/li>
&lt;/ul>
&lt;h2 id="cause">Cause&lt;/h2>
&lt;ul>
&lt;li>The Trustgrid edge node cannot connect to repo.trustgrid.io on port 443 to update packages&lt;/li>
&lt;/ul>
&lt;h2 id="resolution">Resolution&lt;/h2>
&lt;ul>
&lt;li>Confirm the node can resolve repo.trustgrid.io&lt;/li>
&lt;li>Ensure the node can connect to repo.trustgrid.io:443&lt;/li>
&lt;li>&lt;a href="/help-center/kb/ssl-tls-tampering/">Verify no DPI-SSL or HTTPS proxy&lt;/a> is interfereing with the SSL certificate for repo.trustgrid.io&lt;/li>
&lt;/ul></description></item><item><title>Help-Center: Edge Node Behavior When Port 8443 is blocked</title><link>/help-center/kb/8443-blocked/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/help-center/kb/8443-blocked/</guid><description>
&lt;h2 id="symptoms">Symptoms&lt;/h2>
&lt;ul>
&lt;li>Node will not connect to the portal&lt;/li>
&lt;li>Packet capture shows the following behavior:&lt;/li>
&lt;li>
&lt;ul>
&lt;li>DNS request and response for gatekeeper.trustgrid.io and zuul.trustgrid.io&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;ul>
&lt;li>TCP connection attempt to port 8443 on the returned IP address with no response&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;ul>
&lt;li>A 2 minute delay before the above cycle repeats&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="cause">Cause&lt;/h2>
&lt;ul>
&lt;li>The Trustgrid edge node cannot connect to the &lt;a href="/help-center/kb/site-requirements/">Trustgrid control plane&lt;/a> over 8443&lt;/li>
&lt;/ul>
&lt;h2 id="verification">Verification&lt;/h2>
&lt;ul>
&lt;li>Place a device in the same network (or assume the IP address of) the edge node. Confirm you can make a successful connection to gatekeeper.trustgrid.io:8443 using telnet, netcat or similar tool&lt;/li>
&lt;/ul>
&lt;h2 id="resolution">Resolution&lt;/h2>
&lt;ul>
&lt;li>Adjust firewall settings to ensure TCP traffic over port 8443 is allowed to all of the &lt;a href="/help-center/kb/site-requirements/">Trustgrid control plane&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Help-Center: Edge Node Behavior When SSL / TLS Certificate is Altered</title><link>/help-center/kb/ssl-tls-tampering/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/help-center/kb/ssl-tls-tampering/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>Products that alter SSL/TLS certificate chains will prevent the node from functioning normally.&lt;/p>
&lt;/div>
&lt;h2 id="symptoms">Symptoms&lt;/h2>
&lt;ul>
&lt;li>Node will not connect - This will occur if the SSL/TLS chain is altered on port 8443&lt;/li>
&lt;li>Node will not update - This will occur if the SSL/TLS chain is altered on port 443&lt;/li>
&lt;li>Packet captures will show something like the below repeating:&lt;/li>
&lt;li>
&lt;ul>
&lt;li>TLS “Client Hello”&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;ul>
&lt;li>Server (Trustgrid IP) will send a reset (RST) &lt;img src="pcap.png" alt="img">&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="cause">Cause&lt;/h2>
&lt;p>The integrity of communication is a critical feature of Trustgrid’s network solution. Any product that alters the SSL certificate chain will prevent the node from functioning normally.&lt;/p>
&lt;p>Typically this is caused by a security appliance (Next Generation Firewall or Web Proxy) doing some form of SSL Decryption (e.g. DPI-SSL, HTTPS inspection)&lt;/p>
&lt;h2 id="verification">Verification&lt;/h2>
&lt;p>To verify this is indeed occurring you can run the below command from the Trustgrid terminal:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl s_client -connect repo.trustgrid.io:443 -showcerts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This example is testing connectivity to the Trustgrid repository used for updates. You can replace &lt;code>repo.trustgrid.io:443&lt;/code> with &lt;code>gatekeeper.trustgrid.io:8443&lt;/code> to test connectivity to a Trustgrid service over 8443.&lt;/p>
&lt;p>After running you will need to scroll back to the top to see the first certificate in the chain&lt;/p>
&lt;p>If the certificate chain is being altered you will see something like the below where Trustgrid is not the first entry:&lt;/p>
&lt;p>&lt;img src="openssl.png" alt="img">&lt;/p>
&lt;p>The correct certiticate chain should look like:&lt;/p>
&lt;p>&lt;img src="cert.png" alt="img">&lt;/p>
&lt;h2 id="resolution">Resolution&lt;/h2>
&lt;ul>
&lt;li>Traffic on ports 443 and 8443 between the Trustgrid node and the &lt;a href="/help-center/kb/site-requirements/">Trustgrid public IPs&lt;/a> and/or *.trustgrid.io must be excluded from any SSL/TLS decryption/inspection&lt;/li>
&lt;li>After excluding the traffic, restart the edge node&lt;/li>
&lt;/ul></description></item><item><title>Help-Center: Edge Node Startup &amp; Update Communication Process</title><link>/help-center/kb/startup-process/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/help-center/kb/startup-process/</guid><description>
&lt;h2 id="startup-process">Startup Process&lt;/h2>
&lt;ol>
&lt;li>ARP for the default gateway&lt;/li>
&lt;li>DNS request for A record for gatekeeper.trustgrid.io &amp;amp; zuul.trustgrid.io&lt;/li>
&lt;li>
&lt;ol>
&lt;li>The response will be IPs in the Trustgrid AWS networks, &lt;code>35.171.100.16/28&lt;/code> (us-east-1) or &lt;code>34.223.12.192/28&lt;/code> (us-west-2)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>The node will initiate a connection to port 8443 on the IP addresses returned and start a TLS handshake.&lt;/li>
&lt;li>After a successfully TLS handshake, the node will show as connected in the Trustgrid Portal&lt;/li>
&lt;/ol>
&lt;h2 id="update-process">Update Process&lt;/h2>
&lt;ol>
&lt;li>DNS request for A record of repo.trustgrid.io&lt;/li>
&lt;li>
&lt;ol>
&lt;li>The response will be IPs in the Trustgrid AWS networks, &lt;code>35.171.100.16/28&lt;/code> (us-east-1) or &lt;code>34.223.12.192/28&lt;/code> (us-west-2)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>The node will initiate a connection to port 443 on the ip address returned for repo.trustgrid.io&lt;/li>
&lt;li>The update process will download any updated packages using port&lt;/li>
&lt;/ol></description></item></channel></rss>